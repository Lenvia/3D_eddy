<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>earth</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      /* 隐藏body窗口区域滚动条 */
    }
  </style>
</head>

<body>
  <script type="module">
		import * as THREE from './node_modules/three/build/three.module.js';
		import { TrackballControls } from './node_modules/three/examples/jsm/controls/TrackballControls.js';
		import { OrbitControls } from './node_modules/three/examples/jsm/controls/OrbitControls.js'
	
    var scene = new THREE.Scene();
    

		var geometry   = new THREE.SphereGeometry(100, 32, 32);
		var textureLoader = new THREE.TextureLoader();
		textureLoader.crossOrigin = "";
		textureLoader.load('./images/2_no_clouds_16k.jpg', 
			function (texture) {
				var material  = new THREE.MeshPhongMaterial({
					map: texture,
					opacity:0.7,
				});
				var earthMesh = new THREE.Mesh(geometry, material);
				scene.add(earthMesh);
				console.log('0');
			},
			function () {},  // onProgress function
			function ( error ) { console.log( error ) } // onError function
		);

		console.log(scene)


		// var geometry2 = new THREE.SphereGeometry(5, 32, 32)
		// var material2 = new THREE.MeshPhongMaterial();
		// var earthMesh2 = new THREE.Mesh(geometry2, material2);
		// scene.add(earthMesh2)
		// earthMesh2.translateY(10);//沿着x轴正方向平移距离100

		//辅助坐标系
		var axesHelper = new THREE.AxesHelper(500);
    scene.add(axesHelper);
		
		//环境光
		scene.add(new THREE.AmbientLight(0x333333));

		//平行光
		var light = new THREE.DirectionalLight(0xffffff, 1);
		light.position.set(5,3,5);
		scene.add(light);

    /**
     * 相机设置
     */
    var width = window.innerWidth; //窗口宽度
    var height = window.innerHeight; //窗口高度
    var k = width / height; //窗口宽高比
    var s = 200; //三维场景显示范围控制系数，系数越大，显示的范围越大
    //创建相机对象
    var camera = new THREE.OrthographicCamera(-s * k, s * k, s, -s, 1, 1000);
    camera.position.set(500, 500, 300); //设置相机位置
    camera.lookAt(scene.position); //设置相机方向(指向的场景对象)

		// console.log(scene)

    /**
     * 创建渲染器对象
     */
    var renderer = new THREE.WebGLRenderer();
    renderer.setSize(width, height);//设置渲染区域尺寸
    renderer.setClearColor(0xb9d3ff, 1); //设置背景颜色
    document.body.appendChild(renderer.domElement); //body元素中插入canvas对象

		// controls
		var controls = new TrackballControls( camera, renderer.domElement );
		controls.minDistance = .1;
		controls.maxDistance = 0.5;
		controls.rotateSpeed = 2.0;  // 旋转速度
		controls.staticMoving = false;  // 不开启移动惯性

		window.addEventListener( 'resize', onWindowResize, false );
		
		// 窗口变动触发函数
		function onWindowResize() {
			camera.aspect = window.innerWidth / window.innerHeight;
			camera.updateProjectionMatrix();
			renderer.setSize( window.innerWidth, window.innerHeight );
			controls.handleResize();
		}

    // 渲染函数
		function animate() {
			requestAnimationFrame( animate );  //很重要很重要，不然显示不出来地图
			controls.update(); //更新控制器
			renderer.render( scene, camera );
		}
		animate();

		
  </script>
</body>
</html>
